/* Sahara Desert Chic with gold accents; respects prefers-reduced-motion */
:root{
  --sand:#f4ead7; --dune:#e6d3b4; --amber:#c69c6d; --gold:#b8860b;
  --ink:#3a2c20; --paper:#fffaf2; --accent:#7a5a2e; --found:#b8860b22;
  --focus:#b8860b66;
}

/* Dark mode variables */
body.dark{
  --sand:#2a2118; --dune:#3a2e20; --paper:#3a3229; --ink:#f4ead7;
  --found:#b8860b44;
}

*{box-sizing:border-box;}

html,body{
  margin:0;padding:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background:linear-gradient(180deg,var(--sand),var(--dune));
  min-height:100vh;
  transition:background 0.3s ease, color 0.3s ease;
}

/* Header & Controls */
header{
  text-align:center;
  padding:1rem 1rem 0.5rem;
}

h1{
  margin:.25rem 0 0;
  font-weight:800;
  letter-spacing:.3px;
}

.controls{
  display:flex;
  gap:.5rem;
  justify-content:center;
  flex-wrap:wrap;
  margin:1rem 0;
}

.toggle, #resetBtn{
  background:var(--amber);
  color:white;
  border:0;
  border-radius:999px;
  padding:.6rem 1rem;
  font-weight:700;
  cursor:pointer;
  transition:all 0.2s ease;
}

.toggle:focus-visible, #resetBtn:focus-visible{
  outline:3px solid var(--focus);
  outline-offset:2px;
}

.toggle.active, #resetBtn:active{
  filter:saturate(60%);
  transform:scale(0.98);
}

/* Main App Layout */
.app{
  display:grid;
  grid-template-columns:300px 1fr;
  gap:2rem;
  max-width:1100px;
  margin:0 auto;
  padding:1rem;
}

@media (max-width:900px){
  .app{grid-template-columns:1fr;}
}

/* Legend/Word List */
.legend{
  background:var(--paper);
  border:1px solid #e7dcc6;
  border-radius:12px;
  padding:1rem;
  transition:all 0.3s ease;
}

.legend h2{
  margin:.25rem 0 .5rem;
  color:var(--accent);
}

.word-list{
  list-style:none;
  margin:0;
  padding:0;
  columns:2;
  column-gap:1rem;
}

@media (max-width:520px){
  .word-list{columns:1;}
}

.word-list li{
  margin:.25rem 0;
  padding:.25rem .4rem;
  border-radius:8px;
  transition:all 0.2s ease;
}

.word-list li.found{
  background:var(--found);
  text-decoration:line-through;
  color:var(--gold);
}

.word-list a{
  color:inherit;
  text-decoration:none;
  font-weight:600;
}

.word-list a:hover{
  text-decoration:underline;
}

/* Grid Layout */
.grid-wrap{
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
  transition:all 0.3s ease;
}

.grid{
  --size:12;
  display:grid;
  grid-template-columns:repeat(var(--size), clamp(28px,7.2vw,48px));
  gap:2px;
  user-select:none;
  background-color:#e9dfc9;
  padding:8px;
  border-radius:12px;
  border:2px solid #e1d4b8;
  box-shadow:0 6px 20px #00000012;
  transition:all 0.3s ease;
}

body.dark .grid{
  background-color:#4a4035;
  border-color:#5a4d3c;
}

.cell{
  display:flex;
  justify-content:center;
  align-items:center;
  background:#fffaf2;
  border-radius:6px;
  font-weight:800;
  letter-spacing:.5px;
  height:clamp(28px,7.2vw,48px);
  cursor:pointer;
  transition:all 0.2s ease;
  position:relative;
}

body.dark .cell{
  background:#5a4d3c;
  color:#f4ead7;
}

.cell.selected{
  background:linear-gradient(180deg,#fff7e7,#fff0d6);
  transform:scale(1.05);
  z-index:2;
}

body.dark .cell.selected{
  background:linear-gradient(180deg,#6a5c45,#5a4d3c);
}

.cell.found{
  background:var(--found);
  color:#3b2a1f;
  animation:cellFound 0.6s ease;
}

body.dark .cell.found{
  background:#3a3118;
  color:#fcefb4;
}

.cell.found::after{
  content:"";
  position:absolute;
  inset:0;
  border:2px solid var(--gold);
  border-radius:6px;
  animation:goldPulse 2s infinite;
}

@keyframes cellFound{
  0%{transform:scale(1);}
  50%{transform:scale(1.1);}
  100%{transform:scale(1);}
}

@keyframes goldPulse{
  0%,100%{opacity:0.7;}
  50%{opacity:1;}
}

/* Africa Shape Mask */
.grid-wrap.africa-mask{
  -webkit-mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50,10 C60,15 75,25 80,40 C85,55 75,70 60,80 C45,90 30,85 20,70 C10,55 15,35 30,25 C35,20 45,15 50,10Z" fill="black"/></svg>');
  mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50,10 C60,15 75,25 80,40 C85,55 75,70 60,80 C45,90 30,85 20,70 C10,55 15,35 30,25 C35,20 45,15 50,10Z" fill="black"/></svg>');
  -webkit-mask-size:90% 90%;
  mask-size:90% 90%;
  -webkit-mask-repeat:no-repeat;
  mask-repeat:no-repeat;
  -webkit-mask-position:center;
  mask-position:center;
}

/* Finale Styles */
.finale{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:var(--sand);
  border-radius:16px;
  opacity:0;
  visibility:hidden;
  z-index:20;
  transition:all 2.5s ease;
  overflow:hidden;
  text-align:center;
  padding:2rem;
}

.finale.show{
  opacity:1;
  visibility:visible;
}

.finale img{
  width:min(90%,320px);
  border-radius:16px;
  opacity:0;
  transform:scale(.95);
  transition:opacity 2.5s ease, transform 2.5s ease;
  margin-bottom:2rem;
  border:3px solid var(--gold);
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
}

.finale.show img{
  opacity:1;
  transform:scale(1);
}

.finale h3{
  color:var(--ink);
  font-size:1.4rem;
  margin:0;
  max-width:500px;
  line-height:1.4;
}

.gold-shimmer{
  position:absolute;
  top:0;
  left:-150%;
  width:50%;
  height:100%;
  background:linear-gradient(120deg,transparent,rgba(255,215,0,.25),transparent);
  transform:skewX(-20deg);
  animation:shimmer 4s infinite;
  pointer-events:none;
}

@keyframes shimmer{
  0%{left:-150%;}
  50%,100%{left:150%;}
}

/* Fade out animation */
@keyframes fadeGold{
  0%{opacity:1; filter:brightness(1);}
  50%{opacity:0.6; filter:brightness(1.3);}
  100%{opacity:0; filter:brightness(1.8);}
}

@keyframes speckle{
  0%{background-position:0 0, 0 0; opacity:1;}
  100%{background-position:200px 200px, -200px -200px; opacity:0;}
}

.grid-wrap.fade-out{
  animation:fadeGold 2.8s ease forwards;
  position:relative;
}

.grid-wrap.fade-out::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:
    radial-gradient(rgba(184,134,11,0.8) 1px, transparent 1px),
    radial-gradient(rgba(230,195,104,0.8) 1px, transparent 1px);
  background-size:4px 4px, 6px 6px;
  animation:speckle 2.8s ease forwards;
  pointer-events:none;
  z-index:10;
}

/* Footer */
footer{
  padding:2rem 1rem;
  text-align:center;
  color:var(--accent);
  font-style:italic;
  margin-top:2rem;
}

/* Subtle parchment texture */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background-image:linear-gradient(45deg, transparent 49%, rgba(184,134,11,0.03) 50%, transparent 51%);
  background-size:10px 10px;
  opacity:.15;
  mix-blend-mode:multiply;
  z-index:-1;
}

/* Prefers reduced motion */
@media (prefers-reduced-motion: reduce){
  *,:before,:after{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
  }
}
